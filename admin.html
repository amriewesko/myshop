<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Shop Admin | จัดการร้านค้า</title>
    <!-- Bootstrap CSS for responsive design and components -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts - Kanit for modern typography -->
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Animate.css for subtle entrance animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Gate: Shown before admin panel, for password authentication -->
    <div id="login-gate" class="d-flex justify-content-center align-items-center vh-100 p-3">
        <div class="card p-4 admin-login-card text-center">
            <h3 class="mb-4">Admin Login</h3>
            <div class="mb-3">
                <label for="password-input" class="form-label visually-hidden">ป้อนรหัสผ่าน</label>
                <input type="password" id="password-input" class="form-control form-control-lg" placeholder="ป้อนรหัสผ่าน" aria-label="Admin password">
            </div>
            <button id="login-btn" class="btn btn-primary btn-lg w-100">เข้าสู่ระบบ</button>
        </div>
    </div>

    <!-- Admin Panel: Main interface for managing products, shown after successful login -->
    <div id="admin-panel" class="d-none">
        <!-- Admin Navbar -->
        <nav class="navbar navbar-dark bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand">แผงควบคุมผู้ดูแลระบบ</a>
                <div class="d-flex">
                    <a href="index.html" class="btn btn-outline-light btn-sm me-2">กลับหน้าร้านค้า</a>
                    <button id="logout-btn" class="btn btn-outline-danger btn-sm">ออกจากระบบ</button>
                </div>
            </div>
        </nav>
        
        <!-- Admin Content Container -->
        <div class="container mt-4 admin-panel-container">
            <h3 class="mb-4">จัดการสินค้า</h3>

            <!-- Product Add/Edit Form Card -->
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <h5 id="form-title" class="card-title mb-3">เพิ่มสินค้าใหม่</h5>
                    <form id="product-form">
                        <input type="hidden" id="product-id"> <!-- Hidden field for product ID (for editing) -->
                        <div class="mb-3">
                            <label for="name" class="form-label">ชื่อสินค้า <span class="text-danger">*</span></label>
                            <input type="text" id="name" class="form-control" required placeholder="ชื่อสินค้า เช่น iPhone 15 Pro, เสื้อยืดลายกราฟิก">
                        </div>
                        <!-- Removed: Description input field -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">หมวดหมู่ <span class="text-danger">*</span></label>
                                <input type="text" id="category" class="form-control" required placeholder="เช่น รองเท้า, เสื้อผ้า, อุปกรณ์อิเล็กทรอนิกส์">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="price" class="form-label">ราคา <span class="text-danger">*</span></label>
                                <input type="number" id="price" class="form-control" required min="0" step="0.01" placeholder="ราคา เช่น 1250.00">
                            </div>
                        </div>
                        <!-- Input for selecting image file from device -->
                        <div class="mb-3">
                            <label for="imageFileInput" class="form-label">เลือกรูปภาพสินค้า <span class="text-danger">*</span></label>
                            <input type="file" id="imageFileInput" class="form-control" accept="image/*" multiple>
                            <div class="form-text text-muted">เลือกไฟล์รูปภาพจากอุปกรณ์ของคุณ (สามารถเลือกได้หลายรูป)</div>
                            <!-- Image preview area -->
                            <div id="imagePreview" class="d-flex flex-wrap mt-3"></div>
                        </div>
                        <!-- Hidden field to store the image URL (populated by JS after upload or for existing products) -->
                        <!-- IMPORTANT: The ID of this hidden input must match the field name in your Google Sheet (image_url) -->
                        <input type="hidden" id="image_url" class="form-control"> 

                        <div class="mb-3">
                            <label for="shopeeLink" class="form-label">ลิงก์ Shopee</label>
                            <!-- IMPORTANT: The ID of this input must match the field name in your Google Sheet (shopee_url) if you want to use it directly -->
                            <!-- However, app.js currently maps shopeeLink input to shopee_url data field, so this ID is fine. -->
                            <input type="url" id="shopeeLink" class="form-control" placeholder="https://shopee.co.th/product_link_here">
                        </div>
                        <!-- Removed: Featured (สินค้าแนะนำ/สินค้าเด่น) checkbox as 'สถานะ' is removed -->
                        <button type="submit" class="btn btn-primary me-2">บันทึก</button>
                        <button type="button" id="clear-btn" class="btn btn-secondary">ยกเลิก</button>
                    </form>
                </div>
            </div>

            <hr class="my-5">

            <!-- All Products List Section -->
            <h4 class="mb-4">รายการสินค้าทั้งหมด</h4>
            <!-- Admin Search Input for filtering products in the table -->
            <input type="text" id="admin-search-input" class="form-control mb-3" placeholder="ค้นหาสินค้าด้วย ID หรือชื่อ (เช่น P-001, รองเท้า)...">
            
            <!-- Table to display products -->
            <div id="admin-product-list" class="table-responsive">
                <!-- Product data will be rendered here by app.js -->
            </div>
            
            <!-- Loader for admin product table -->
            <div id="loader" class="text-center my-5 d-none">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2 text-muted">กำลังโหลดสินค้า...</p>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap Bundle with Popper for components and interactivity -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JavaScript for dynamic content and logic -->
    <script src="app.js"></script>
</body>
</html>
